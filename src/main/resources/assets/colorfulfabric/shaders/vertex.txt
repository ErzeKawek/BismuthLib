#version 120

varying out vec4 color;
varying out vec3 pos;
varying out vec2 uvAtlas;
varying out vec2 uvLight;
varying out vec4 fog;

void main() {
	color = gl_Color;
	pos = (gl_Vertex.xyz + vec3(1.0, 1.0, 1.0)) / 32.0;
	uvAtlas = (gl_TextureMatrix[0] * gl_MultiTexCoord0).xy;
	uvLight = (gl_TextureMatrix[2] * gl_MultiTexCoord2).xy;
	gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;
	float depth = clamp((gl_Position.z - gl_Fog.start) * gl_Fog.scale, 0.0, 1.0);
	fog = vec4(gl_Fog.color.rgb, depth);
}
